{"version":3,"sources":["../src/main.ts","../src/components/channels.ts","../src/components/file.ts","../src/utils/index.ts","../src/components/readme.ts","../src/api/epg_pw.ts","../src/api/iptv_org.ts","../src/api/yang_m3u.ts","../src/api/yuechan_live.ts","../src/api/fanmingming_live.ts","../src/api/qwerttvv_bj_iptv.ts","../src/api/joevess_iptv.ts","../src/api/hotel_ multicast.ts","../src/api/adultiptv_net.ts","../src/api/ChinaIPTV.ts","../src/api/index.ts","../src/components/rollback.ts","../src/api/epgs.ts","../src/api/movie.ts","../src/components/tvbox.ts","../src/task/custom.ts"],"sourcesContent":["import { hrtime } from \"node:process\";\nimport { updateChannelsJson } from \"./components/channels\";\nimport {\n  cleanFiles,\n  copyFiles,\n  getContent,\n  mergeSources,\n  mergeTxts,\n  writeEpgXML,\n  writeMovieJson,\n  writeM3u,\n  writeM3uToTxt,\n  writeSources,\n} from \"./components/file\";\n\nimport { updateChannelList, updateReadme } from \"./components/readme\";\nimport { sources } from \"./api\";\nimport {\n  updateByRollback,\n  updateEPGByRollback,\n  updateDATAByRollback,\n} from \"./components/rollback\";\nimport { epgs_sources } from \"./api/epgs\";\nimport { ApiJson } from \"./api/movie\";\nimport { writeTvBoxJson } from \"./components/tvbox\";\nimport { Collector } from \"./utils\";\nimport { runCustomTask } from \"./task/custom\";\n\ncleanFiles();\ncopyFiles();\n\n// 执行脚本\nPromise.allSettled(\n  sources.map(async (sr) => {\n    console.log(`[TASK] Fetch ${sr.name}`);\n    try {\n      const [ok, text, now] = await getContent(sr);\n      if (ok && !!text) {\n        console.log(\n          `Fetch m3u from ${sr.name} finished, cost ${(parseInt(hrtime.bigint().toString()) - parseInt(now.toString())) /\n          10e6\n          } ms`\n        );\n        const sourcesCollector = Collector(\n          undefined,\n          (v) => !/^([a-z]+)\\:\\/\\//.test(v)\n        );\n        let [m3u, count] = sr.filter(\n          text as string,\n          [\"o_all\", \"all\"].includes(sr.f_name) ? \"skip\" : \"normal\",\n          sourcesCollector.collect\n        );\n        writeM3u(sr.f_name, m3u);\n        writeM3uToTxt(sr.name, sr.f_name, m3u);\n        writeSources(sr.name, sr.f_name, sourcesCollector.result());\n        writeTvBoxJson(\n          sr.f_name,\n          [{ name: sr.name, f_name: sr.f_name }],\n          sr.name\n        );\n        updateChannelList(sr.name, sr.f_name, m3u);\n        return [\"normal\", count];\n      } else {\n        return undefined;\n      }\n    } catch (e) {\n      const res = await updateByRollback(sr, sr.filter);\n      if (!!res) {\n        const [m3u, count] = res;\n        writeM3u(sr.f_name, m3u);\n        writeM3uToTxt(sr.name, sr.f_name, m3u);\n        writeTvBoxJson(\n          sr.f_name,\n          [{ name: sr.name, f_name: sr.f_name }],\n          sr.name\n        );\n        updateChannelList(sr.name, sr.f_name, m3u);\n        return [\"rollback\", count];\n      } else {\n        return [\"rollback\", void 0];\n      }\n    }\n  })\n)\n  .then(async (result) => {\n    const epgs = await Promise.allSettled(\n      epgs_sources.map(async (epg_sr) => {\n        console.log(`[TASK] Fetch EPG ${epg_sr.name}`);\n        try {\n          const [ok, text, now] = await getContent(epg_sr);\n\n          if (ok && !!text) {\n            console.log(\n              `Fetch EPG from ${epg_sr.name} finished, cost ${(parseInt(hrtime.bigint().toString()) -\n                parseInt(now.toString())) /\n              10e6\n              } ms`\n            );\n            writeEpgXML(epg_sr.f_name, text as string);\n            return [\"normal\"];\n          } else {\n            // rollback\n            const text = await updateEPGByRollback(epg_sr);\n            if (!!text) {\n              writeEpgXML(epg_sr.f_name, text as string);\n              return [\"rollback\"];\n            } else {\n              // rollback failed\n              console.log(`[WARNING] EPG ${epg_sr.name} get failed!`);\n              return [void 0];\n            }\n          }\n        } catch (e) {\n          const text = await updateEPGByRollback(epg_sr);\n          if (!!text) {\n            writeEpgXML(epg_sr.f_name, text as string);\n            return [\"rollback\"];\n          } else {\n            // rollback failed\n            console.log(`[WARNING] EPG ${epg_sr.name} get failed!`);\n            return [void 0];\n          }\n        }\n      })\n    );\n\n    return {\n      sources: result,\n      epgs: epgs,\n    };\n  })\n\n  .then((result) => {\n    console.log(`[TASK] Write important files`);\n    const sources_res = result.sources.map((r) => (<any>r).value);\n    const epgs_res = result.epgs.map((r) => (<any>r).value);\n    mergeTxts();\n    mergeSources();\n    writeTvBoxJson(\"tvbox\", sources, \"Channels\");\n    updateChannelsJson(sources, sources_res, epgs_sources);\n    updateReadme(sources, sources_res, epgs_sources, epgs_res);\n  })\n\n  .then(async (result) => {\n    const movie = await Promise.allSettled(\n      ApiJson.map(async (data_sr) => {\n        console.log(`[TASK] Fetch DATA ${data_sr.name}`);\n        try {\n          const [ok, text, now] = await getContent(data_sr);\n\n          if (ok && !!text) {\n            console.log(\n              `Fetch DATA from ${data_sr.name} finished, cost ${(parseInt(hrtime.bigint().toString()) -\n                parseInt(now.toString())) /\n              10e6\n              } ms`\n            );\n            writeMovieJson(data_sr.f_name, text as string);\n            return [\"normal\"];\n          } else {\n            // rollback\n            const text = await updateDATAByRollback(data_sr);\n            if (!!text) {\n              writeMovieJson(data_sr.f_name, text as string);\n              return [\"rollback\"];\n            } else {\n              // rollback failed\n              console.log(`[WARNING] DATA ${data_sr.name} get failed!`);\n              return [void 0];\n            }\n          }\n        } catch (e) {\n          const text = await updateDATAByRollback(data_sr);\n          if (!!text) {\n            writeMovieJson(data_sr.f_name, text as string);\n            return [\"rollback\"];\n          } else {\n            // rollback failed\n            console.log(`[WARNING] DATA ${data_sr.name} get failed!`);\n            return [void 0];\n          }\n        }\n      })\n    );\n    return {\n      sources: result,\n      movie: movie,\n    };\n  })\n\n  .then(() => {\n    console.log(`[TASK] Make custom sources`);\n    runCustomTask();\n  })\n  .catch((err) => {\n    console.error(err);\n  });\n","import path from \"node:path\";\nimport fs from \"node:fs\";\nimport type { TChannelsSources, IChannelsResult } from \"../types\";\n\nexport const updateChannelsJson = (\n  sources: TChannelsSources,\n  sources_res: Array<[string, number | undefined]>,\n  epgs: TChannelsSources\n) => {\n  const json_p = path.resolve(\"dist\", \"channels.json\");\n  const result: IChannelsResult = {\n    builderVersion: 1,\n    channels: sources?.map((source, idx) => ({\n      name: source.name,\n      m3u: `./${source.f_name}.m3u`,\n      count: sources_res?.[idx]?.[1],\n    })),\n    epgs: epgs?.map((epg) => ({\n      name: epg.name,\n      epg: `./epg/${epg.f_name}.xml`,\n    })),\n    updated_at: new Date().getTime(),\n  };\n  if (!fs.existsSync(path.resolve(\"dist\"))) {\n    fs.mkdirSync(path.resolve(\"dist\"));\n  }\n  fs.writeFileSync(json_p, JSON.stringify(result));\n};","import fs from \"node:fs\";\nimport path from \"node:path\";\nimport { hrtime } from \"node:process\";\nimport type { TEPGSource, ISource } from \"../types\";\nimport { with_github_raw_url_proxy, m3u2txt } from \"../utils\";\n\nexport const getContent = async (src: ISource | TEPGSource) => {\n  const now = hrtime.bigint();\n  const url = /^https:\\/\\/raw.githubusercontent.com\\//.test(src.url)\n    ? with_github_raw_url_proxy(src.url)\n    : src.url;\n  const res = await fetch(url);\n  return [res.ok, await res.text(), now];\n};\n\nexport const writeM3u = (name: string, m3u: string) => {\n  if (!fs.existsSync(path.join(path.resolve(), \"dist\"))) {\n    fs.mkdirSync(path.join(path.resolve(), \"dist\"));\n  }\n  fs.writeFileSync(path.join(path.resolve(), \"dist\", `${name}.m3u`), m3u);\n};\n\nexport const writeSources = (\n  name: string,\n  f_name: string,\n  sources: Map<string, string[]>\n) => {\n  let srcs = {};\n  for (const [k, v] of sources) {\n    srcs[k] = v;\n  }\n  if (!fs.existsSync(path.resolve(\"dist\", \"sources\"))) {\n    fs.mkdirSync(path.resolve(\"dist\", \"sources\"));\n  }\n  fs.writeFileSync(\n    path.resolve(\"dist\", \"sources\", `${f_name}.json`),\n    JSON.stringify({\n      name,\n      sources: srcs,\n    })\n  );\n};\n\nexport const writeM3uToTxt = (name: string, f_name: string, m3u: string) => {\n  const m3uArray = m3u.split(\"\\n\");\n  let txt = m3u2txt(m3uArray);\n  if (!fs.existsSync(path.join(path.resolve(), \"dist\", \"txt\"))) {\n    fs.mkdirSync(path.join(path.resolve(), \"dist\", \"txt\"));\n  }\n  fs.writeFileSync(\n    path.join(path.resolve(), \"dist\", \"txt\", `${f_name}.txt`),\n    txt\n  );\n};\n\nexport const mergeTxts = () => {\n  const txts_p = path.resolve(\"dist\", \"txt\");\n  const files = fs.readdirSync(txts_p);\n  const txts = files\n    .map((d) => fs.readFileSync(path.join(txts_p, d).toString()))\n    .join(\"\\n\");\n  fs.writeFileSync(path.join(txts_p, \"merged.txt\"), txts);\n};\n\nexport const mergeSources = () => {\n  const sources_p = path.resolve(\"dist\", \"sources\");\n  const files = fs.readdirSync(sources_p);\n  const res = {\n    name: \"Sources\",\n    sources: {},\n  };\n  files.forEach((f) => {\n    const so = JSON.parse(\n      fs.readFileSync(path.join(sources_p, f), \"utf-8\")\n    ).sources;\n    Object.keys(so).forEach((k) => {\n      if (!res.sources[k]) {\n        res.sources[k] = so[k];\n      } else {\n        res.sources[k] = [...new Set([...res.sources[k], ...so[k]])];\n      }\n    });\n  });\n  fs.writeFileSync(path.join(sources_p, \"sources.json\"), JSON.stringify(res));\n};\n\nexport const writeEpgXML = (f_name: string, xml: string) => {\n  if (!fs.existsSync(path.join(path.resolve(), \"dist\", \"epg\"))) {\n    fs.mkdirSync(path.join(path.resolve(), \"dist\", \"epg\"));\n  }\n  fs.writeFileSync(path.resolve(\"dist\", \"epg\", `${f_name}.xml`), xml);\n};\n\nexport const writeMovieJson = (f_name: string, json: string) => {\n  if (!fs.existsSync(path.join(path.resolve(), \"dist\", \"movie\"))) {\n    fs.mkdirSync(path.join(path.resolve(), \"dist\", \"movie\"));\n  }\n  fs.writeFileSync(path.resolve(\"dist\", \"movie\", `${f_name}`), json);\n};\n\nconst cleanDir = (p: string) => {\n  if (fs.existsSync(p)) {\n    fs.readdirSync(p).forEach((file) => {\n      const isDir = fs.statSync(path.join(p, file)).isDirectory();\n      if (isDir) {\n        cleanDir(path.join(p, file));\n      } else {\n        fs.unlinkSync(path.join(p, file));\n      }\n    });\n  }\n};\n\nconst copyDir = (src: string, dest: fs.PathLike, callback: { (): void; (arg0: NodeJS.ErrnoException): void; }) => {\n  const copy = (copySrc: any, copyDest: any) => {\n    fs.readdir(copySrc, (err, list) => {\n      if (err) {\n        callback(err);\n        return;\n      }\n      list.forEach((item) => {\n        const ss = path.resolve(copySrc, item);\n        fs.stat(ss, (err, stat) => {\n          if (err) {\n            callback(err);\n          } else {\n            const curSrc = path.resolve(copySrc, item);\n            const curDest = path.resolve(copyDest, item);\n            if (stat.isFile()) {\n              fs.createReadStream(curSrc).pipe(fs.createWriteStream(curDest));\n            } else if (stat.isDirectory()) {\n              fs.mkdirSync(curDest, { recursive: true });\n              copy(curSrc, curDest);\n            }\n          }\n        });\n      });\n    });\n  };\n\n  fs.access(dest, (err) => {\n    if (err) {\n      fs.mkdirSync(dest, { recursive: true });\n    }\n    copy(src, dest);\n  });\n};\n\nexport const cleanFiles = () => cleanDir(path.join(path.resolve(), \"dist\"));\nexport const copyFiles = () =>\n  copyDir(\n    path.join(path.resolve(), \"src/public\"),\n    path.join(path.resolve(), \"dist\"),\n    () => { }\n  );","import type { TREADMEMirrorSitesMatrix, ISource } from \"../types\";\n\nimport * as OpenCC from \"opencc-js\";\n\nimport { existsSync } from 'node:fs'\n\nimport path from \"node:path\";\n\nexport const config_path = path.resolve(\"config\");\n\nexport const config_custom_path = path.join(config_path, \"custom\");\n\nexport const dist_path = path.resolve(\"dist\");\n\nexport const TMPL_DIR = process.env.TMPL_DIR || \"src/tmpl\";\n\nexport const txt_path = path.join(dist_path, \"txt\");\n\nexport const epg_path = path.join(dist_path, \"epg\");\n\nexport const list_path = path.join(dist_path, \"list\");\n\nexport const sources_path = path.join(dist_path, \"sources\");\n\nexport const tvbox_path = path.join(dist_path, \"tvbox\");\n\nexport const write_custom_path = path.join(dist_path, \"custom\");\n\nexport const README_DIR = path.join(\".readme\");\n\nexport const PUBLIC_DIR = process.env.PUBLIC_DIR || \"./.gh-pages\";\n\nexport const OWNER = \"vodtv\";\n\nexport const REPO = \"iptv-source\";\n\n/**\n * 检查文件是否可用\n * @param f\n * @returns\n */\nexport const canIUseM3uFile = (f: string) => {\n  const m3u_p = path.resolve(\"dist\", f)\n  return existsSync(m3u_p)\n}\n\n/**\n * 检查 iptv-checker 环境\n * @returns\n */\nexport const canIUseIPTVChecker = async () => {\n  const { ENABLE_IPTV_CHECKER, IPTV_CHECKER_URL } = process.env\n\n  if (ENABLE_IPTV_CHECKER !== \"true\" || !IPTV_CHECKER_URL) return false\n\n  try {\n    const res = await fetch(IPTV_CHECKER_URL)\n    if (/^[2]/.test(res.status.toString())) {\n      return true\n    } else {\n      return false\n    }\n  } catch (err) {\n    return false\n  }\n}\n\nexport const update_time =\n  new Date().toLocaleDateString() + \" \" + new Date().toLocaleTimeString();\n\nexport const converter = OpenCC.Converter({ from: \"hk\", to: \"cn\" });\n\nexport const get_custom_url = () =>\n  !!process.env.CUSTOM_URL ? process.env.CUSTOM_URL : \"https://iptv.vodtv.cn\";\n\nexport const sites_matrix: TREADMEMirrorSitesMatrix = [\n  {\n    protocol: \"https\",\n    url: \"https://raw.viptv.work\",\n    frequence: \"viptv.work\",\n    idc: \"官方云\",\n    provider: \"[viptv](https://github.com/viptv-work)\",\n  }\n]\n\nexport const get_rollback_urls = () => {\n  const matrix_url = sites_matrix.map((m) => m.url)\n  if (!process.env.ROLLBACK_URLS) {\n    return [\"https://iptv.vodtv.cn\", ...matrix_url];\n  }\n  return process.env.ROLLBACK_URLS.split(\",\")\n    .map((url) => url.trim())\n    .concat([\"https://iptv.vodtv.cn\", ...matrix_url]);\n};\n\nexport const get_github_raw_proxy_url = () => {\n  const custom = process.env.CUSTOM_GITHUB_RAW_SOURCE_PROXY_URL;\n  return !!custom ? custom : `https://gh.con.sh/`;\n};\n\nexport const replace_github_raw_proxy_url = (s: string) => {\n  const proxy_url = get_github_raw_proxy_url();\n  return s.replace(\n    /tvg\\-logo=\"https:\\/\\/raw\\.githubusercontent\\.com\\//g,\n    `tvg-logo=\"${proxy_url}/https://raw.githubusercontent.com/`\n  );\n};\n\nexport const is_filted_channels = (s: string) => {\n  if (s.includes(\"ABN\")) {\n    return true;\n  }\n  if (s.includes(\"NTD\")) {\n    return true;\n  }\n  return false;\n};\n\nexport const handle_m3u = (r: string) => {\n  const raw = r\n    .trim()\n    .replace(/\\r/g, \"\")\n    .split(\"\\n\")\n    .filter((r) => !!r);\n  let result: string[] = [];\n  const extM3uRegExp = /#EXTM3U/;\n  const extinfRegExp = /#EXTINF:-1([^,]*),(.*)/;\n  const hostRegExp = /^([^:]+):\\/\\/([^/]+)/;\n  for (let i = 0; i < raw.length; i++) {\n    if (extM3uRegExp.test(raw[i])) {\n      result.push(raw[i]);\n      continue;\n    }\n    if (extinfRegExp.test(raw[i]) && hostRegExp.test(raw[i + 1])) {\n      result = result.concat([raw[i], raw[i + 1]]);\n      i++;\n      continue;\n    }\n  }\n  return result;\n};\n\nexport const with_github_raw_url_proxy = (u: string) => {\n  return process.env.CLOSE_SOURCE_PROXY?.trim() === \"true\"\n    ? u\n    : `${get_github_raw_proxy_url()}/${u}`;\n};\n\nexport const replace_github_rawcontent = (url: string) => {\n  return url.replace(\n    \"https://raw.githubusercontent.com/\",\n    \"https://mirror.ghproxy.com/https://raw.githubusercontent.com/\"\n  );\n};\n\nexport const get_channel_id = (extinf: string) => {\n  const regExp = /\\#EXTINF:-1([^,]*),(.*)/;\n  const name = converter(regExp.exec(extinf)![2]).toLowerCase();\n  return name\n    .replace(/\\[([^\\]]*)\\]/g, \"\")\n    .replace(/\\(([^\\)]*)\\)/g, \"\")\n    .replace(/（([^）]*)）/g, \"\")\n    .replace(/「([^」]+)」/g, \"\")\n    .replace(/\\-/g, \"\")\n    .replace(/\\@\\@[0-9]*/g, \"\")\n    .replace(/Ⅰ/g, \"\")\n    .replace(/ 8m/g, \"\")\n    .replace(/([^\\|]+)\\|/g, \"\")\n    .replace(/([^ⅰ]+)ⅰ/g, \"\")\n    .replace(/([\\u4e00-\\u9fff]+)\\s+([\\u4e00-\\u9fff]+)/g, \"$1$2\")\n    .replace(/ +/g, \" \")\n    .trim();\n};\n\nexport const collectM3uSource = (\n  extinf: string,\n  url: string,\n  fn: (k: string, v: string) => void\n) => {\n  const id = get_channel_id(extinf);\n  fn(id, url);\n};\n\nexport const filter: ISource[\"filter\"] = (\n  raw,\n  caller,\n  collectFn\n): [string, number] => {\n  const rawArray = handle_m3u(replace_github_raw_proxy_url(raw)).filter(\n    (r) => !/#[^E]/.test(r)\n  );\n  if (!/#EXTM3U/.test(rawArray[0])) {\n    rawArray.unshift(\"#EXTM3U\");\n  }\n  if (caller === \"normal\" && collectFn) {\n    for (let i = 1; i < rawArray.length; i += 2) {\n      collectM3uSource(rawArray[i], rawArray[i + 1], collectFn);\n    }\n  }\n  return [converter(rawArray.join(\"\\n\")), (rawArray.length - 1) / 2];\n};\n\nexport const Collector = (\n  keyFilter?: (k: string) => boolean,\n  valueFilter?: (v: string) => boolean\n) => {\n  let data = new Map<string, string[]>();\n  return {\n    collect: (k: string, v: string) => {\n      if (!!keyFilter && keyFilter(k)) {\n        return;\n      }\n      if (!!valueFilter && valueFilter(v)) {\n        return;\n      }\n      if (data.has(k)) {\n        const vb = data.get(k);\n        if (!vb) {\n          data.set(k, [v]);\n          return;\n        }\n        if (!vb.includes(v)) {\n          data.set(k, [...vb, v]);\n          return;\n        }\n      } else {\n        data.set(k, [v]);\n      }\n    },\n    result: () => {\n      return data;\n    },\n  };\n};\n\nexport const m3u2txt = (m3uArray: string[]) => {\n  let groups = new Map<string, string>();\n  const channelRegExp = /\\#EXTINF:-1([^,]*),(.*)/;\n  const groupRegExp = /group-title=\"([^\"]*)\"/;\n  for (let i = 1; i < m3uArray.length; i += 2) {\n    const reg = channelRegExp.exec(m3uArray[i]) as RegExpExecArray;\n    const group = groupRegExp.exec(reg[1].trim());\n    let g = \"\";\n    if (!group) {\n      g = \"Undefined\";\n    } else {\n      g = group[1].trim();\n    }\n    if (groups.has(g)) {\n      groups.set(\n        g,\n        `${groups.get(g)}${reg[2].trim().replace(/\\s+/g, \"_\")},${m3uArray[i + 1]\n        }\\n`\n      );\n    } else {\n      groups.set(\n        g,\n        `${reg[2].trim().replace(/\\s+/g, \"_\")},${m3uArray[i + 1]}\\n`\n      );\n    }\n  }\n  let txt = \"\";\n  groups.forEach((v, k) => {\n    txt += `${k},#genre#\\n${v}\\n`;\n  });\n  return txt.substring(0, txt.length - 2);\n};\n\nconst from_infos = new Map([\n  [\"sn.chinamobile.com\", \"中国移动陕西\"],\n  [\"sh.chinamobile.com\", \"中国移动上海\"],\n  [\"hl.chinamobile.com\", \"中国移动黑龙江\"],\n  [\"js.chinamobile.com\", \"中国移动江苏\"],\n  [\"cztv.com\", \"浙江广播电视集团\"],\n  [\"mobaibox.com\", \"中国移动江苏\"],\n  [\"shaoxing.com.cn\", \"绍兴网\"],\n  [\"cztvcloud.com\", \"新蓝云\"],\n  [\"btzx.com.cn\", \"兵团在线网站\"],\n  [\"hznet.tv\", \"菏泽网络电视台\"],\n  [\"xntv.tv\", \"西宁网络电视台\"],\n  [\"jlntv.cn\", \"吉林广播电视台\"],\n  [\"ybtvyun.com\", \"延边广播电视台\"],\n  [\"dxhmt.cn\", \"河南大象融媒体\"],\n  [\"hebyun.com.cn\", \"冀云\"],\n  [\"nntv.cn\", \"老友网\"],\n  [\"sjzntv.cn\", \"燕赵名城网\"],\n  [\"yjtvw.com\", \"阳江广播电视台\"],\n  [\"amazonaws.com\", \"亚马逊AWS\"],\n  [\"jstv.com\", \"荔枝网\"],\n  [\"sgmsw.cn\", \"韶关民声网\"],\n  [\"grtn.cn\", \"广东网络广播电视台\"],\n  [\"nbs.cn\", \"南京广播电视台\"],\n  [\"lsrmw.cn\", \"溧水融媒网\"],\n  [\"zohi.tv\", \"福州明珠\"],\n  [\"qingting.fm\", \"蜻蜓FM\"],\n  [\"hhtv.cc\", \"云南红河发布\"],\n  [\"wsrtv.com.cn\", \"文山州广播电视台\"],\n  [\"xsbnrtv.cn\", \"西双版纳广播电视网\"],\n  [\"live.yantaitv.cn\", \"烟台网络广播电视台\"],\n  [\"cgtn.com\", \"CGTN\"],\n  [\"cctv.com\", \"CCTV\"],\n  [\"cctvplus.com\", \"CCTV+\"],\n  [\"cnr.cn\", \"央广网\"],\n  [\"cmvideo.cn\", \"咪咕\"],\n  [\"douyucdn\", \"斗鱼\"],\n  [\"cri.cn\", \"国际在线\"],\n  [\"hndt.com\", \"河南广播网\"],\n  [\"qxndt.com\", \"黔西南广播网\"],\n  [\"olelive.com\", \"欧乐影院\"],\n  [\"chinashadt.com\", \"千城云科\"],\n  [\"aodianyun.com\", \"奥点云\"],\n  [\"xiancity.cn\", \"西安网\"],\n  [\"raw.githubusercontent.com\", \"Github Raw\"],\n]);\n\nexport const get_from_info = (url: string) => {\n  for (const [k, v] of from_infos) {\n    if (url.includes(k)) {\n      return v;\n    }\n  }\n  const hostRegExp = /([^:]+):\\/\\/([^/]+)/;\n  const host = hostRegExp.exec(url)![2];\n  if (/^\\[/.test(host)) {\n    return \"IPv6 直链\";\n  }\n  if (/^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d+)?$/.test(host)) {\n    return \"IPv4 直链\";\n  }\n  return host;\n};\n\nexport const trimAny = (any: any) => {\n  if (Array.isArray(any)) {\n    return any.map((a: any) => {\n      if (typeof a === \"string\") {\n        return a.trim();\n      }\n      if (typeof a === \"object\") {\n        return trimAny(a);\n      }\n    });\n  }\n\n  if (typeof any === \"object\") {\n    return Object.fromEntries(\n      Object.entries(any).map(([key, value]) => {\n        if (typeof value === \"string\") {\n          return [key, value.trim()];\n        }\n        if (typeof value === \"object\") {\n          return [key, trimAny(value)];\n        }\n      })\n    );\n  }\n\n  if (typeof any === \"string\") {\n    return any.trim();\n  }\n\n  return any;\n};\n","import fs from \"node:fs\";\nimport path from \"node:path\";\nimport type { TREADMESources, TREADMEEPGSources } from \"../types\";\nimport { handle_m3u, get_from_info, update_time } from \"../utils\";\n\nexport const updateChannelList = (\n  name: string,\n  f_name: string,\n  m3u: string,\n  rollback: boolean = false\n) => {\n  const list_temp_p = path.join(path.resolve(), \"src/tmpl/LIST.tmpl.md\");\n  const list = fs.readFileSync(list_temp_p, \"utf8\").toString();\n  const m3uArray = handle_m3u(m3u);\n  const channelRegExp = /\\#EXTINF:-1([^,]*),(.*)/;\n  let i = 1;\n  let channels: Array<string>[] = [];\n  while (i < m3uArray.length) {\n    const reg = channelRegExp.exec(m3uArray[i]) as RegExpExecArray;\n    channels.push([\n      reg[2].replace(/\\|/g, \"\").trim(),\n      get_from_info(m3uArray[i + 1]),\n      m3uArray[i + 1],\n    ]);\n    i += 2;\n  }\n  const after = list\n    .replace(\n      \"{list_title}\",\n      `# List for **${name}**${rollback ? \"(Rollback)\" : \"\"\n      }\\n\\n> M3U: [${f_name}.m3u](./${f_name}.m3u ), TXT: [${f_name}.txt](./txt/${f_name}.txt )`\n    )\n    .replace(\n      \"{update_channels}\",\n      `${channels\n        ?.map(\n          (c, idx) =>\n            `| ${idx + 1} | ${c[0].replace(\"|\", \"\")} | ${c[1]} | <${c[2]}> |`\n        )\n        .join(\"\\n\")}\\n\\nUpdated at **${update_time}**`\n    );\n  const list_p = path.join(path.resolve(), \"dist\", \"list\");\n  if (!fs.existsSync(list_p)) {\n    fs.mkdirSync(list_p);\n  }\n  fs.writeFileSync(path.join(list_p, `${f_name}.list.md`), after);\n};\n\nexport const updateReadme = (\n  sources: TREADMESources,\n  sources_res: Array<[string, number | undefined]>,\n  epgs: TREADMEEPGSources,\n  epgs_res: Array<[string | undefined]>\n) => {\n  const readme_temp_p = path.join(path.resolve(), \"src/tmpl/README.tmpl.md\");\n  const readme = fs.readFileSync(readme_temp_p, \"utf8\").toString();\n\n  const after = readme\n    .replace(\n      \"{update_channels}\",\n      `${sources\n        ?.map(\n          (s, idx) =>\n            `| ${s.name} | [${s.f_name}.m3u](./${s.f_name}.m3u ) <br> [${s.f_name\n            }.txt](./txt/${s.f_name}.txt ) | [List for ${s.name}](./list/${s.f_name\n            }.list ) | ${sources_res?.[idx]?.[1] === undefined\n              ? \"update failed\"\n              : sources_res[idx][1]\n            } | ${sources_res?.[idx]?.[0] === \"rollback\" ? \"✅\" : \"-\"} |`\n        )\n        .join(\"\\n\")}\\n\\n > Updated at **${update_time}**`\n    )\n\n    .replace(\n      \"{update_epgs}\",\n      `${epgs\n        ?.map(\n          (e, idx) =>\n            `| ${e.name} | [${e.f_name}.xml](./epg/${e.f_name}.xml ) | ${!!epgs_res?.[idx]?.[0]\n              ? epgs_res?.[idx]?.[0] === \"rollback\"\n                ? \"✅\"\n                : \"-\"\n              : \"update failed\"\n            } |`\n        )\n        .join(\"\\n\")}\\n\\n > Updated at **${update_time}**`\n    );\n  if (!fs.existsSync(path.join(path.resolve(), \"dist\"))) {\n    fs.mkdirSync(path.join(path.resolve(), \"dist\"));\n  }\n  fs.writeFileSync(path.join(path.resolve(), \"dist\", \"README.md\"), after);\n  fs.writeFileSync(path.join(path.resolve(), \"README.md\"), after);\n};","import { ISource, TSources } from \"../types\";\nimport { collectM3uSource, converter, handle_m3u } from \"../utils\";\n\nexport const epg_pw_filter: ISource[\"filter\"] = (\n  raw,\n  caller,\n  collectFn\n): [string, number] => {\n  const rawArray = handle_m3u(raw);\n  const regExp = /\\#EXTINF:-1\\s+tvg\\-name\\=\\\"([^\"]+)\\\"/;\n\n  let i = 1;\n  let sourced: string[] = [];\n  let result = [rawArray[0]];\n\n  while (i < rawArray.length) {\n    const reg = regExp.exec(rawArray[i]) as RegExpExecArray;\n\n    if (!!reg) {\n      if (caller === \"normal\" && collectFn) {\n        collectM3uSource(rawArray[i], rawArray[i + 1], collectFn);\n      }\n\n      if (!sourced.includes(reg[1])) {\n        sourced.push(reg[1]);\n        result.push(\n          rawArray[i]\n            .replace(/\\@\\@[0-9]*/g, \"\")\n            .replace(/\\[geo\\-blocked\\]/, \"\")\n            .replace(/\\[Geo\\-blocked\\]/, \"\")\n            .trim()\n        );\n        result.push(rawArray[i + 1]);\n      }\n    }\n\n    i += 2;\n  }\n\n  return [converter(result.join(\"\\n\")), (result.length - 1) / 2];\n};\n\nexport const epg_pw_sources: TSources = [\n  {\n    name: \"epg.pw 央视\",\n    f_name: \"ew_cc\",\n    url: \"https://epg.pw/test_channels_china_national.m3u\",\n    filter: epg_pw_filter,\n  },\n  {\n    name: \"epg.pw 卫视\",\n    f_name: \"ew_ws\",\n    url: \"https://epg.pw/test_channels_china_province.m3u\",\n    filter: epg_pw_filter,\n  },\n  {\n    name: \"epg.pw 国内\",\n    f_name: \"ew_cn\",\n    url: \"https://epg.pw/test_channels_china.m3u\",\n    filter: epg_pw_filter,\n  },\n  {\n    name: \"epg.pw 香港\",\n    f_name: \"ew_hk\",\n    url: \"https://epg.pw/test_channels_hong_kong.m3u\",\n    filter: epg_pw_filter,\n  },\n  {\n    name: \"epg.pw 澳門\",\n    f_name: \"ew_om\",\n    url: \"https://epg.pw/test_channels_macau.m3u\",\n    filter: epg_pw_filter,\n  },\n  {\n    name: \"epg.pw 台灣\",\n    f_name: \"ew_tw\",\n    url: \"https://epg.pw/test_channels_taiwan.m3u\",\n    filter: epg_pw_filter,\n  },\n  {\n    name: \"epg.pw 全部\",\n    f_name: \"ew_all\",\n    url: \"https://epg.pw/test_channels_all.m3u\",\n    filter: epg_pw_filter,\n  },\n  {\n    name: \"epg.pw ipv6\",\n    f_name: \"ew_all\",\n    url: \"https://epg.pw/test_channels_ipv6.m3u\",\n    filter: epg_pw_filter,\n  },\n];\n","import {\n  converter,\n  handle_m3u,\n  is_filted_channels,\n  collectM3uSource,\n  get_channel_id,\n} from \"../utils\";\nimport type { ISource, TSources } from \"../types\";\n\nexport const iptv_org_filter: ISource[\"filter\"] = (\n  raw,\n  caller,\n  collectFn\n): [string, number] => {\n  const rawArray = handle_m3u(raw);\n  const invalidExp = /\\#EXTVLCOPT:/;\n\n  const arr = rawArray.filter((r) => !invalidExp.test(r));\n\n  let sourced: string[] = [];\n  let result = [arr[0]];\n\n  for (let i = 1; i < arr.length; i += 2) {\n    const id = get_channel_id(arr[i]);\n\n    if (is_filted_channels(id.trim())) {\n      continue;\n    }\n\n    if (caller === \"normal\" && collectFn) {\n      collectM3uSource(arr[i], arr[i + 1], collectFn);\n    }\n\n    if (!sourced.includes(id)) {\n      sourced.push(id);\n      result.push(\n        arr[i]\n          .replace(/\\@\\@[0-9]*/g, \"\")\n          .replace(/\\[geo\\-blocked\\]/, \"\")\n          .replace(/\\[Geo\\-blocked\\]/, \"\")\n          .trim()\n      );\n      result.push(arr[i + 1]);\n    }\n  }\n\n  return [converter(result.join(\"\\n\")), (result.length - 1) / 2];\n};\n\nexport const iptv_org_sources: TSources = [\n  {\n    name: \"iptv.org China\",\n    f_name: \"o_cn\",\n    url: \"https://raw.githubusercontent.com/iptv-org/iptv/gh-pages/countries/cn.m3u\",\n    filter: iptv_org_filter,\n  },\n];\n\nexport const iptv_org_stream_sources: TSources = [\n  {\n    name: \"iptv.org stream China\",\n    f_name: \"o_s_cn\",\n    url: \"https://raw.githubusercontent.com/iptv-org/iptv/master/streams/cn.m3u\",\n    filter: iptv_org_filter,\n  },\n  {\n    name: \"iptv.org stream China 112114\",\n    f_name: \"o_s_cn_112114\",\n    url: \"https://raw.githubusercontent.com/iptv-org/iptv/master/streams/cn_112114.m3u\",\n    filter: iptv_org_filter,\n  },\n  {\n    name: \"iptv.org stream China CCTV\",\n    f_name: \"o_s_cn_cctv\",\n    url: \"https://raw.githubusercontent.com/iptv-org/iptv/master/streams/cn_cctv.m3u\",\n    filter: iptv_org_filter,\n  },\n  {\n    name: \"iptv.org stream China CGTN\",\n    f_name: \"o_s_cn_cgtn\",\n    url: \"https://raw.githubusercontent.com/iptv-org/iptv/master/streams/cn_cgtn.m3u\",\n    filter: iptv_org_filter,\n  },\n];\n","import { filter } from \"../utils\";\nimport type { TSources } from \"../types\";\n\nexport const yang_m3u_sources: TSources = [\n  {\n    name: \"YanG-1989 Gather\",\n    f_name: \"y_g\",\n    url: \"https://raw.githubusercontent.com/YanG-1989/m3u/main/Gather.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"熊猫直播\",\n    f_name: \"xiongmao\",\n    url: \"https://raw.githubusercontent.com/huangsuming/iptv/main/list/ipanda.txt\",\n    filter: filter,\n  },\n  {\n    name: \"HBv4\",\n    f_name: \"hbv4\",\n    url: \"https://raw.githubusercontent.com/huangsuming/iptv/main/list/hbv4.txt\",\n    filter: filter,\n  },\n  {\n    name: \"HBv6\",\n    f_name: \"hbv6\",\n    url: \"https://raw.githubusercontent.com/huangsuming/iptv/main/list/hbv4.txt\",\n    filter: filter,\n  },\n];\n","import { filter } from \"../utils\";\nimport type { TSources } from \"../types\";\n\nexport const yuechan_live_sources: TSources = [\n  {\n    name: \"YueChan-Live IPTV\",\n    f_name: \"ycl_iptv\",\n    url: \"https://raw.githubusercontent.com/YueChan/Live/main/IPTV.m3u\",\n    filter: filter,\n  },\n];\n","import { filter } from \"../utils\";\nimport type { TSources } from \"../types\";\n\nexport const fanmingming_live_sources: TSources = [\n  {\n    name: \"fanmingming/live demo\",\n    f_name: \"fmml_demo\",\n    url: \"https://raw.githubusercontent.com/fanmingming/live/main/tv/m3u/demo.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"fanmingming/live ipv6\",\n    f_name: \"fmml_ipv6\",\n    url: \"https://raw.githubusercontent.com/fanmingming/live/main/tv/m3u/ipv6.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"fanmingming/live ipv6plus\",\n    f_name: \"fmml_ipv6plus\",\n    url: \"https://raw.githubusercontent.com/fanmingming/live/main/tv/m3u/ipv6plus.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"fanmingming/live domainv6(Invalid)\",\n    f_name: \"fmml_bst\",\n    url: \"https://raw.githubusercontent.com/fanmingming/live/main/tv/m3u/Invalid/bst.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"fanmingming/live domainv6(Invalid)\",\n    f_name: \"fmml_cbn\",\n    url: \"https://raw.githubusercontent.com/fanmingming/live/main/tv/m3u/Invalid/cbn.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"fanmingming/live domainv6(Invalid)\",\n    f_name: \"fmml_dv6\",\n    url: \"https://raw.githubusercontent.com/fanmingming/live/main/tv/m3u/Invalid/domainv6.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"fanmingming/live domainv6(Invalid)\",\n    f_name: \"fmml_ipv6\",\n    url: \"https://raw.githubusercontent.com/fanmingming/live/main/tv/m3u/Invalid/ipv6.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"fanmingming/live domainv6(Invalid)\",\n    f_name: \"fmml_ysp\",\n    url: \"https://raw.githubusercontent.com/fanmingming/live/main/tv/m3u/Invalid/ysp.m3u\",\n    filter: filter,\n  },\n];\n","import { filter } from \"../utils\";\nimport type { TSources } from \"../types\";\n\nexport const qwerttvv_bj_iptv_sources: TSources = [\n  {\n    name: \"北京联通 单播列表\",\n    f_name: \"q_bj_iptv_unicom\",\n    url: \"https://cdn.jsdelivr.net/gh/qwerttvv/Beijing-IPTV@master/IPTV-Unicom.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"北京联通 组播列表\",\n    f_name: \"q_bj_iptv_unicom_m\",\n    url: \"https://cdn.jsdelivr.net/gh/qwerttvv/Beijing-IPTV@master/IPTV-Unicom-Multicast.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"北京移动 单播列表\",\n    f_name: \"q_bj_iptv_mobile\",\n    url: \"https://cdn.jsdelivr.net/gh/qwerttvv/Beijing-IPTV@master/IPTV-Mobile.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"北京移动 组播列表\",\n    f_name: \"q_bj_iptv_mobile_m\",\n    url: \"https://cdn.jsdelivr.net/gh/qwerttvv/Beijing-IPTV@master/IPTV-Mobile-Multicast.m3u\",\n    filter: filter,\n  },\n];\n","import { filter } from \"../utils\";\nimport type { TSources } from \"../types\";\n\nexport const joevess_iptv_sources: TSources = [\n  {\n    name: \"joevess/IPTV home\",\n    f_name: \"j_main_home\",\n    url: \"https://raw.githubusercontent.com/joevess/IPTV/main/home.m3u8\",\n    filter: filter,\n  },\n  {\n    name: \"joevess/IPTV iptv\",\n    f_name: \"j_main_iptv\",\n    url: \"https://raw.githubusercontent.com/joevess/IPTV/main/iptv.m3u8\",\n    filter: filter,\n  },\n  {\n    name: \"joevess/IPTV sources\",\n    f_name: \"j_sources_home\",\n    url: \"https://raw.githubusercontent.com/joevess/IPTV/main/sources/home_sources.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"joevess/IPTV iptv\",\n    f_name: \"j_sources_iptv\",\n    url: \"https://raw.githubusercontent.com/joevess/IPTV/main/sources/iptv_sources.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"joevess/IPTV sources\",\n    f_name: \"j_m3u_home\",\n    url: \"https://raw.githubusercontent.com/joevess/IPTV/main/m3u/home.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"joevess/IPTV iptv\",\n    f_name: \"j_m3u_iptv\",\n    url: \"https://raw.githubusercontent.com/joevess/IPTV/main/m3u/iptv.m3u\",\n    filter: filter,\n  },\n];\n","import { filter } from \"../utils\";\nimport type { TSources } from \"../types\";\n\nexport const ss_sources: TSources = [\n  {\n    name: \"全国 酒店组播源\",\n    f_name: \"ss_itv\",\n    url: \"https://cdn.jsdelivr.net/gh/ssili126/tv@main/itvlist.m3u\",\n    filter: filter,\n  },\n];\n","import { filter } from \"../utils\";\nimport type { TSources } from \"../types\";\n//https://zhuan.dnwx.vip/?url=https://mpimg.cn%2Fdown.php/F67ed75e5d3486a5dd1122bc6a197cb49.txt 挂了\nexport const adultiptv_sources: TSources = [\n  {\n    name: \"adultiptv.net\",\n    f_name: \"adultiptv_chs\",\n    url: \"http://adultiptv.net/chs.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"adultiptv.net\",\n    f_name: \"adultiptv_all\",\n    url: \"http://adultiptv.net/all.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"vbskycn/iptv\",\n    f_name: \"vbskycn_ipv4\",\n    url: \"https://live.zhoujie218.top/tv/iptv4.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"vbskycn/iptv\",\n    f_name: \"vbskycn_ipv6\",\n    url: \"https://live.zhoujie218.top/tv/iptv6.m3u\",\n    filter: filter,\n  },\n  {\n    name: \"hujingguang/ChinaIPTV\",\n    f_name: \"hujingguang_cnTV_AutoUpdate\",\n    url: \"https://raw.githubusercontent.com/hujingguang/ChinaIPTV/main/cnTV_AutoUpdate.m3u8\",\n    filter: filter,\n  },\n]\n","import { filter } from \"../utils\";\nimport type { TSources } from \"../types\";\n\nexport const cn_sources: TSources = [\n  {\n    name: \"稳定 最新源\",\n    f_name: \"hc_cntv\",\n    url: \"https://cdn.jsdelivr.net/gh/hujingguang/ChinaIPTV@main/cnTV_AutoUpdate.m3u8\",\n    filter: filter,\n  },\n];\n","export * from \"./epg_pw\";\nexport * from \"./iptv_org\";\nexport * from \"./yang_m3u\";\nexport * from \"./yuechan_live\";\nexport * from \"./fanmingming_live\";\nexport * from \"./qwerttvv_bj_iptv\";\nexport * from \"./joevess_iptv\";\nexport * from \"./hotel_ multicast\";\nexport * from \"./adultiptv_net\";\nexport * from \"./ChinaIPTV\";\nimport {\n  adultiptv_sources,\n  epg_pw_sources,\n  iptv_org_sources,\n  iptv_org_stream_sources,\n  yang_m3u_sources,\n  yuechan_live_sources,\n  fanmingming_live_sources,\n  qwerttvv_bj_iptv_sources,\n  joevess_iptv_sources,\n  ss_sources,\n  cn_sources,\n} from \".\";\n\nexport const sources = [\n  ...adultiptv_sources,\n  ...fanmingming_live_sources,\n  ...yuechan_live_sources,\n  ...yang_m3u_sources,\n  ...joevess_iptv_sources,\n  ...iptv_org_sources,\n  ...iptv_org_stream_sources,\n  ...epg_pw_sources,\n  ...qwerttvv_bj_iptv_sources,\n  ...ss_sources,\n  ...cn_sources,\n];\n","import { hrtime } from \"node:process\";\nimport { ISource, TEPGSource } from \"../types\";\nimport { get_rollback_urls } from \"../utils\";\n\nexport const updateByRollback = async (\n  sr: ISource,\n  sr_filter: ISource[\"filter\"],\n  idx: number = 0\n): Promise<[string, number] | undefined> => {\n  const rollback_urls = get_rollback_urls();\n  try {\n    const now = hrtime.bigint();\n    const res = await fetch(`${rollback_urls[idx]}/${sr.f_name}.m3u`);\n    if (res.ok) {\n      console.log(\n        `Fetch m3u from ${sr.name} with ROLLBACK from ${rollback_urls[idx]\n        } finished, cost ${(parseInt(hrtime.bigint().toString()) - parseInt(now.toString())) /\n        10e6\n        } ms`\n      );\n      const text = await res.text();\n      return sr_filter(text as string, \"rollback\");\n    }\n    console.log(\n      `Fetch m3u Rollback from ${rollback_urls[idx]} FAILED, try next...`\n    );\n    if (++idx < rollback_urls.length) {\n      return updateByRollback(sr, sr_filter, idx);\n    }\n    console.log(`All failed, give up ${sr.name}!`);\n    return undefined;\n  } catch (e) {\n    console.log(\n      `Fetch m3u Rollback from ${rollback_urls[idx]} FAILED, try next...`\n    );\n    if (++idx < rollback_urls.length) {\n      return updateByRollback(sr, sr_filter, idx);\n    }\n    console.log(`All failed, give up ${sr.name}!`);\n    return undefined;\n  }\n};\n\nexport const updateEPGByRollback = async (\n  sr: TEPGSource,\n  idx: number = 0\n): Promise<string | undefined> => {\n  const rollback_urls = get_rollback_urls();\n  try {\n    const now = hrtime.bigint();\n    const res = await fetch(`${rollback_urls[idx]}/${sr.f_name}.xml`);\n    if (res.ok) {\n      console.log(\n        `Fetch EPG from ${sr.name} with ROLLBACK from ${rollback_urls[idx]\n        } finished, cost ${(parseInt(hrtime.bigint().toString()) - parseInt(now.toString())) /\n        10e6\n        } ms`\n      );\n      return await res.text();\n    }\n    console.log(\n      `Fetch EPG Rollback from ${rollback_urls[idx]} FAILED, try next...`\n    );\n    if (++idx < rollback_urls.length) {\n      return updateEPGByRollback(sr, idx);\n    }\n    console.log(`All failed, give up ${sr.name}!`);\n    return undefined;\n  } catch (e) {\n    console.log(\n      `Fetch EPG Rollback from ${rollback_urls[idx]} FAILED, try next...`\n    );\n    if (++idx < rollback_urls.length) {\n      return updateEPGByRollback(sr, idx);\n    }\n    console.log(`All failed, give up ${sr.name}!`);\n    return undefined;\n  }\n};\n\nexport const updateDATAByRollback = async (\n  sr: TEPGSource,\n  idx: number = 0\n): Promise<string | undefined> => {\n  const rollback_urls = get_rollback_urls();\n  try {\n    const now = hrtime.bigint();\n    const res = await fetch(`${rollback_urls[idx]}/data/${sr.f_name}`);\n    if (res.ok) {\n      console.log(\n        `Fetch DATA from ${sr.name} with ROLLBACK from ${rollback_urls[idx]\n        } finished, cost ${(parseInt(hrtime.bigint().toString()) - parseInt(now.toString())) /\n        10e6\n        } ms`\n      );\n      return await res.text();\n    }\n    console.log(\n      `Fetch DATA Rollback from ${rollback_urls[idx]} FAILED, try next...`\n    );\n    if (++idx < rollback_urls.length) {\n      return updateDATAByRollback(sr, idx);\n    }\n    console.log(`All failed, give up ${sr.name}!`);\n    return undefined;\n  } catch (e) {\n    console.log(\n      `Fetch DATA Rollback from ${rollback_urls[idx]} FAILED, try next...`\n    );\n    if (++idx < rollback_urls.length) {\n      return updateDATAByRollback(sr, idx);\n    }\n    console.log(`All failed, give up ${sr.name}!`);\n    return undefined;\n  }\n};\n","import { DSource } from \"../types\";\n\nexport const epgs_sources: DSource[] = [\n  {\n    name: \"EPG接口1\",\n    f_name: \"fmml\",\n    url: \"https://raw.githubusercontent.com/fanmingming/live/main/e.xml\",\n  },\n  {\n    name: \"EPG接口2\",\n    f_name: \"51zmt\",\n    url: \"http://epg.51zmt.top:8000/e.xml\",\n  },\n  {\n    name: \"EPG接口3\",\n    f_name: \"51zmt_cc\",\n    url: \"http://epg.51zmt.top:8000/cc.xml\",\n  },\n  {\n    name: \"EPG接口4\",\n    f_name: \"51zmt_df\",\n    url: \"http://epg.51zmt.top:8000/difang.xml\",\n  },\n];\n","import { DSource } from \"../types\";\nexport const ApiJson: DSource[] = [\n  {\n    name: \"弹幕库接口\",\n    f_name: \"artdm-1.xml\",\n    url: \"https://gcore.jsdelivr.net/gh/zhw2590582/assets-cdn@master/danmuku/one-more-time-one-more-chance.xml\",\n  },\n  {\n    name: \"弹幕库接口\",\n    f_name: \"artdm-2.xml\",\n    url: \"https://gcore.jsdelivr.net/gh/zhw2590582/assets-cdn@master/danmuku/your-name.xml\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-6.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=6\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-7.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=7\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-8.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=8\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-9.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=9\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-10.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=10\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-11.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=11\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-12.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=12\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-13.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=13\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-14.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=14\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-15.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=15\",\n  },\n  {\n    name: \"量子资源-lzzy.tv \",\n    f_name: \"lzzy-16.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=16\",\n  },\n  {\n    name: \"量子资源-lzzy.tv \",\n    f_name: \"lzzy-23.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=23\",\n  },\n  {\n    name: \"量子资源-lzzy.tv \",\n    f_name: \"lzzy-24.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=24\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-25.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=25\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-26.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=26\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-27.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=27\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-28.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=28\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-29.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=29\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-30.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=30\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-31.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=31\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-32.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=32\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-33.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=33\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-34.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=34\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-37.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=37\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-38.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=38\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-39.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=39\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-40.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=40\",\n  },\n  {\n    name: \"量子资源-lzzy.tv\",\n    f_name: \"lzzy-46.json\",\n    url: \"http://cj.lziapi.com/api.php/provide/vod/from/lzm3u8/at/json/?ac=videolist&t=46\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-49.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=49\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-50.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=50\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-54.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=54\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-64.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=64\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-67.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=67\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-66.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=66\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-68.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=68\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-69.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=69\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-29.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=29\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-30.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=30\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-56.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=56\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-57.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=57\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-58.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=58\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-59.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=59\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-25.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=25\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-26.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=26\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-27.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=27\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-6.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=6\",\n  },\n  {\n    name: \"索尼资源 - suonizy.com\",\n    f_name: \"snzy-7.json\",\n    url: \"https://suoniapi.com/api.php/provide/vod/from/snm3u8/at/json/?ac=videolist&t=7\",\n  },\n  {\n    name: \"魔都资源 - moduzy.net\",\n    f_name: \"mdzy-1.json\",\n    url: \"https://www.mdzyapi.com/api.php/provide/vod/from/modum3u8/at/json?ac=videolist&t=1\",\n  },\n  {\n    name: \"魔都资源 - moduzy.net\",\n    f_name: \"mdzy-2.json\",\n    url: \"https://www.mdzyapi.com/api.php/provide/vod/from/modum3u8/at/json?ac=videolist&t=2\",\n  },\n  {\n    name: \"魔都资源 - moduzy.net\",\n    f_name: \"mdzy-3.json\",\n    url: \"https://www.mdzyapi.com/api.php/provide/vod/from/modum3u8/at/json?ac=videolist&t=3\",\n  },\n  {\n    name: \"魔都资源 - moduzy.net\",\n    f_name: \"mdzy-4.json\",\n    url: \"https://www.mdzyapi.com/api.php/provide/vod/from/modum3u8/at/json?ac=videolist&t=4\",\n  },\n  {\n    name: \"魔都资源 - moduzy.net\",\n    f_name: \"mdzy-5.json\",\n    url: \"https://www.mdzyapi.com/api.php/provide/vod/from/modum3u8/at/json?ac=videolist&t=5\",\n  },\n  {\n    name: \"魔都资源 - moduzy.net\",\n    f_name: \"mdzy-6.json\",\n    url: \"https://www.mdzyapi.com/api.php/provide/vod/from/modum3u8/at/json?ac=videolist&t=6\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-6.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=6\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-7.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=7\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-8.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=8\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-9.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=9\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-10.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=10\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-11.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=11\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-12.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=12\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-20.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=20\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-13.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=13\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-14.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=14\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-15.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=15\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-16.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=16\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-17.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=17\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-18.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=18\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-25.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=25\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-26.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=26\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-27.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=27\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-28.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=28\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-49.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=49\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-50.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=50\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-54.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=54\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-63.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=63\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-64.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=64\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-65.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=65\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-66.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=66\",\n  },\n  {\n    name: \"鱼乐资源- ylzy[11-20].com\",\n    f_name: \"ylzy-67.json\",\n    url: \"https://api.ylzy.me/api.php/provide/vod/?ac=videolist&t=67\",\n  },\n  {\n    name: \"美女小姐姐\",\n    f_name: \"ks.txt\",\n    url: \"https://v.591meta.com/ks.txt\",\n  },\n  {\n    name: \"美女小姐姐\",\n    f_name: \"ks-xjj.txt\",\n    url: \"https://gcore.jsdelivr.net/gh/maintell/xjj@master/video/ks.txt\",\n  },\n  {\n    name: \"tiktok小姐姐\",\n    f_name: \"tiktok.txt\",\n    url: \"https://gcore.jsdelivr.net/gh/maintell/xjj@master/video/tiktok.txt\",\n  },\n  {\n    name: \"跳舞小姐姐\",\n    f_name: \"ks-dance.txt\",\n    url: \"https://gcore.jsdelivr.net/gh/maintell/xjj@master/video/ks.dance.txt\",\n  },\n  {\n    name: \"快手小姐姐\",\n    f_name: \"ks-meinv.txt\",\n    url: \"https://gcore.jsdelivr.net/gh/maintell/xjj@master/video/ks.meinv.txt\",\n  },\n  {\n    name: \"美腿小姐姐\",\n    f_name: \"ks-meitui.txt\",\n    url: \"https://gcore.jsdelivr.net/gh/maintell/xjj@master/video/ks.meitui.txt\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-31.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=31\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-32.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=32\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv \",\n    f_name: \"bfzy-33.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=33\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-34.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=34\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-35.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=35\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-36.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=36\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-37.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=37\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-38.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=38\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-40.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=40\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-41.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=41\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-42.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=42\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-43.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=43\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-44.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=44\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-46.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=46\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-47.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=47\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-48.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=48\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-49.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=49\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-21.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=21\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-22.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=22\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-23.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=23\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-24.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=24\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-25.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=25\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-26.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=26\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-27.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=27\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-54.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=54\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-55.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=55\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-57.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=57\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-59.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=59\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-60.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=60\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-61.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=61\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-62.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=62\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-63.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=63\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-64.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=64\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-65.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=65\",\n  },\n  {\n    name: \"暴风资源-bfzy.tv\",\n    f_name: \"bfzy-66.json\",\n    url: \"https://bfzyapi.com/api.php/provide/vod/from/bfzym3u8/at/json/?ac=videolist&t=66\",\n  },\n  {\n    name: \"虎牙直播\",\n    f_name: \"huya.txt\",\n    url: \"https://pastebin.com/raw/cxpKT8Mw\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-1.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=1\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-2.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=2\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-3.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=3\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-4.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=4\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-5.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=5\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-6.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=6\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-7.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=7\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-8.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=8\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-9.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=9\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-10.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=10\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-20.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=20\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-21.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=21\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-22.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=22\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-23.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=23\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-24.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=24\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-25.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=25\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-26.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=26\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-27.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=27\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-28.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=28\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-29.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=29\",\n  },\n  {\n    name: \"麻豆视频-91md.me\",\n    f_name: \"mdsp-30.json\",\n    url: \"https://cors.eu.org/http://md91.cc/api.php/provide/vod/from/mdm3u8/at/json?ac=videolist&t=30\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-5.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=5\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-6.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=6\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-7.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=7\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-8.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=8\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-9.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=9\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-10.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=10\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-11.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=11\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-12.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=12\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-13.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=13\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-14.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=14\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-15.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=15\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-16.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=16\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-17.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=17\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-18.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=18\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-19.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=19\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-62.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=62\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-63.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=63\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-64.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=64\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-65.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=65\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-66.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=66\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-67.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=67\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-68.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=68\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-69.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=69\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-70.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=70\",\n  },\n  {\n    name: \"优质资源-api.1080zyku.com\",\n    f_name: \"yzzy-83.json\",\n    url: \"https://api.1080zyku.com/inc/apijson.php?ac=videolist&t=83\",\n  },\n  {\n    name: \"xgsp.tv\",\n    f_name: \"xgsp-girls.json\",\n    url: \"https://zh.xgsp.tv/api/front/models?limit=60&offset=0&primaryTag=girls&filterGroupTags=%5B%5B%22autoTagNew%22%5D%5D&sortBy=trending&parentTag=autoTagNew&userRole=guest&groupId=9&uniq=re6jctvzay4ok2gp\",\n  },\n  {\n    name: \"xgsp.tv\",\n    f_name: \"xgsp-couples.json\",\n    url: \"https://zh.xgsp.tv/api/front/models?limit=60&offset=0&primaryTag=couples&filterGroupTags=%5B%5B%22autoTagNew%22%5D%5D&sortBy=trending&parentTag=autoTagNew&userRole=guest&groupId=9&uniq=gav5eqwy8kfiz4to\",\n  },\n  {\n    name: \"xgsp.tv\",\n    f_name: \"xgsp-man.json\",\n    url: \"https://zh.xgsp.tv/api/front/models?limit=60&offset=0&primaryTag=men&filterGroupTags=%5B%5B%22autoTagNew%22%5D%5D&sortBy=trending&parentTag=autoTagNew&userRole=guest&groupId=9&uniq=gzf5db2v68wn7yls\",\n  },\n  {\n    name: \"xgsp.tv\",\n    f_name: \"xgsp-trans.json\",\n    url: \"https://zh.xgsp.tv/api/front/models?limit=60&offset=0&primaryTag=trans&filterGroupTags=%5B%5B%22autoTagNew%22%5D%5D&sortBy=trending&parentTag=autoTagNew&userRole=guest&groupId=9&uniq=tezacdfq1mlrhkx7\",\n  },\n];","import fs from \"node:fs\";\nimport path from \"node:path\";\nimport {\n  ITvBoxLiveSrc,\n  ITvBoxJson,\n  ITvBoxLiveChannel,\n  ITvBoxLive,\n} from \"../types\";\n\nconst gen_tvbox_json = (srcs: ITvBoxLiveSrc[], group?: string): ITvBoxJson => {\n  if (srcs.length < 1) {\n    throw new Error(\"No sources for tvbox found!\");\n  }\n  const j = {\n    lives: [],\n  } as ITvBoxJson;\n  const live = {\n    group: !!group ? group : srcs[0].name,\n    channels: srcs.map(\n      ({ name, f_name }) =>\n      ({\n        name,\n        urls: [`./txt/${f_name}.txt`],\n      } as ITvBoxLiveChannel)\n    ),\n  } as ITvBoxLive;\n  j.lives.push(live);\n  return j;\n};\n\nexport const writeTvBoxJson = (\n  f_name: string,\n  srcs: ITvBoxLiveSrc[],\n  group?: string\n) => {\n  const tvbox_p = path.resolve(\"dist\", \"tvbox\");\n  if (!fs.existsSync(tvbox_p)) {\n    fs.mkdirSync(tvbox_p);\n  }\n  fs.writeFileSync(\n    path.join(tvbox_p, `/${f_name}.json`),\n    JSON.stringify(gen_tvbox_json(srcs, group))\n  );\n};","import fs from \"node:fs\";\nimport path from \"node:path\";\n\nimport type { ICustom } from \"../types\";\nimport {\n  config_path,\n  dist_path,\n  write_custom_path,\n  m3u2txt,\n  trimAny,\n} from \"../utils\";\n\nconst loadConfigCustom = (): ICustom | undefined => {\n  if (!fs.existsSync(config_path)) {\n    return void 0;\n  }\n\n  if (fs.readdirSync(config_path).length === 0) {\n    return void 0;\n  }\n\n  const cfg = JSON.parse(\n    fs.readFileSync(path.join(config_path, \"custom.json\"), \"utf-8\")\n  ) as ICustom;\n\n  // 去除不必要的空格\n  cfg.rules = trimAny(cfg.rules);\n\n  return cfg;\n};\n\nconst getFilenames = () => {\n  return fs\n    .readdirSync(path.join(dist_path, \"txt\"))\n    .map((f) => f.replace(\".txt\", \"\"))\n    .filter((f) => f !== \"channels\");\n};\n\nexport const runCustomTask = () => {\n  const cfg = loadConfigCustom();\n\n  if (!cfg) return;\n\n  if (!cfg.rules || cfg.rules.length === 0) return;\n\n  if (!fs.existsSync(write_custom_path)) {\n    fs.mkdirSync(write_custom_path);\n  }\n\n  const files = getFilenames();\n\n  const rules = cfg.rules.filter((r) => files.includes(r.upstream.trim()));\n\n  const ruled = rules.map((r) => r.upstream);\n\n  files.forEach((f) => {\n    if (!ruled.includes(f)) return;\n\n    const r = rules.filter((ru) => ru.upstream === f);\n\n    if (r.length === 0) return;\n\n    console.log(`Customize Source ${f}`);\n\n    const arr = fs\n      .readFileSync(path.join(dist_path, `${f}.m3u`), \"utf-8\")\n      .split(\"\\n\");\n    let res = [arr[0]];\n\n    r.forEach((rr) => {\n      for (let i = 1; i < arr.length; i += 2) {\n        const regExp = /\\#EXTINF:-1([^,]*),(.*)/;\n\n        const name = regExp.exec(arr[i])![2].trim();\n\n        // include 的优先级高于 exclude\n        if (!!rr.include && Array.isArray(rr.include)) {\n          if (rr.include.includes(name)) {\n            res.push(arr[i]);\n            res.push(arr[i + 1]);\n          }\n        } else if (!!rr.exclude && Array.isArray(rr.exclude)) {\n          if (!rr.exclude.includes(name)) {\n            res.push(arr[i]);\n            res.push(arr[i + 1]);\n          }\n        } else {\n          res.push(arr[i]);\n          res.push(arr[i + 1]);\n        }\n      }\n\n      if (!!rr.append && Array.isArray(rr.append)) {\n        rr.append.forEach(({ name, url, extinf }) => {\n          if (!!extinf) {\n            res.push(extinf);\n          } else {\n            let _name = name.trim();\n            res.push(\n              `#EXTINF:-1 tvg-name=\"${_name}\" tvg-id=\"${_name}\" group-title=\"Custom\",${_name}`\n            );\n          }\n\n          res.push(url);\n        });\n      }\n    });\n\n    fs.writeFileSync(path.join(write_custom_path, `${f}.m3u`), res.join(\"\\n\"));\n\n    fs.writeFileSync(path.join(write_custom_path, `${f}.txt`), m3u2txt(res));\n  });\n};"],"mappings":"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ACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,oCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,oCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,oCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,eACR,IAAK,iFACP,EACA,CACE,KAAM,yCACN,OAAQ,cACR,IAAK,gFACP,EACA,CACE,KAAM,yCACN,OAAQ,cACR,IAAK,gFACP,EACA,CACE,KAAM,wCACN,OAAQ,cACR,IAAK,oFACP,EACA,CACE,KAAM,wCACN,OAAQ,cACR,IAAK,oFACP,EACA,CACE,KAAM,wCACN,OAAQ,cACR,IAAK,oFACP,EACA,CACE,KAAM,wCACN,OAAQ,cACR,IAAK,oFACP,EACA,CACE,KAAM,wCACN,OAAQ,cACR,IAAK,oFACP,EACA,CACE,KAAM,wCACN,OAAQ,cACR,IAAK,oFACP,EACA,CACE,KAAM,4CACN,OAAQ,cACR,IAAK,2DACP,EACA,CACE,KAAM,4CACN,OAAQ,cACR,IAAK,2DACP,EACA,CACE,KAAM,4CACN,OAAQ,cACR,IAAK,2DACP,EACA,CACE,KAAM,4CACN,OAAQ,cACR,IAAK,2DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,iCACN,OAAQ,SACR,IAAK,8BACP,EACA,CACE,KAAM,iCACN,OAAQ,aACR,IAAK,gEACP,EACA,CACE,KAAM,2BACN,OAAQ,aACR,IAAK,oEACP,EACA,CACE,KAAM,iCACN,OAAQ,eACR,IAAK,sEACP,EACA,CACE,KAAM,iCACN,OAAQ,eACR,IAAK,sEACP,EACA,CACE,KAAM,iCACN,OAAQ,gBACR,IAAK,uEACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,oCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,kFACP,EACA,CACE,KAAM,2BACN,OAAQ,WACR,IAAK,mCACP,EACA,CACE,KAAM,mCACN,OAAQ,cACR,IAAK,6FACP,EACA,CACE,KAAM,mCACN,OAAQ,cACR,IAAK,6FACP,EACA,CACE,KAAM,mCACN,OAAQ,cACR,IAAK,6FACP,EACA,CACE,KAAM,mCACN,OAAQ,cACR,IAAK,6FACP,EACA,CACE,KAAM,mCACN,OAAQ,cACR,IAAK,6FACP,EACA,CACE,KAAM,mCACN,OAAQ,cACR,IAAK,6FACP,EACA,CACE,KAAM,mCACN,OAAQ,cACR,IAAK,6FACP,EACA,CACE,KAAM,mCACN,OAAQ,cACR,IAAK,6FACP,EACA,CACE,KAAM,mCACN,OAAQ,cACR,IAAK,6FACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,8FACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,8FACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,8FACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,8FACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,8FACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,8FACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,8FACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,8FACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,8FACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,8FACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,8FACP,EACA,CACE,KAAM,mCACN,OAAQ,eACR,IAAK,8FACP,EACA,CACE,KAAM,4CACN,OAAQ,cACR,IAAK,2DACP,EACA,CACE,KAAM,4CACN,OAAQ,cACR,IAAK,2DACP,EACA,CACE,KAAM,4CACN,OAAQ,cACR,IAAK,2DACP,EACA,CACE,KAAM,4CACN,OAAQ,cACR,IAAK,2DACP,EACA,CACE,KAAM,4CACN,OAAQ,cACR,IAAK,2DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,4DACP,EACA,CACE,KAAM,4CACN,OAAQ,eACR,IAAK,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","names":["hrtime","path","fs","updateChannelsJson","sources","sources_res","epgs","json_p","result","source","idx","_a","epg","fs","path","hrtime","OpenCC","path","config_path","config_custom_path","dist_path","TMPL_DIR","txt_path","epg_path","list_path","sources_path","tvbox_path","write_custom_path","README_DIR","PUBLIC_DIR","update_time","converter","sites_matrix","get_rollback_urls","matrix_url","m","url","get_github_raw_proxy_url","custom","replace_github_raw_proxy_url","s","proxy_url","is_filted_channels","handle_m3u","r","raw","result","extM3uRegExp","extinfRegExp","hostRegExp","i","with_github_raw_url_proxy","u","_a","get_channel_id","extinf","converter","collectM3uSource","url","fn","id","filter","raw","caller","collectFn","rawArray","handle_m3u","replace_github_raw_proxy_url","r","Collector","keyFilter","valueFilter","data","k","v","vb","m3u2txt","m3uArray","groups","channelRegExp","groupRegExp","i","reg","group","g","txt","from_infos","get_from_info","host","trimAny","any","a","key","value","getContent","src","now","hrtime","url","with_github_raw_url_proxy","res","writeM3u","name","m3u","fs","path","writeSources","f_name","sources","srcs","k","v","writeM3uToTxt","m3uArray","txt","m3u2txt","mergeTxts","txts_p","txts","d","mergeSources","sources_p","files","f","so","writeEpgXML","xml","writeMovieJson","json","cleanDir","p","file","copyDir","dest","callback","copy","copySrc","copyDest","err","list","item","ss","stat","curSrc","curDest","cleanFiles","copyFiles","fs","path","updateChannelList","name","f_name","m3u","rollback","list_temp_p","path","list","fs","m3uArray","handle_m3u","channelRegExp","i","channels","reg","get_from_info","after","c","idx","update_time","list_p","updateReadme","sources","sources_res","epgs","epgs_res","readme_temp_p","s","_a","_b","e","epg_pw_filter","raw","caller","collectFn","rawArray","handle_m3u","regExp","i","sourced","result","reg","collectM3uSource","converter","epg_pw_sources","iptv_org_filter","raw","caller","collectFn","rawArray","handle_m3u","invalidExp","arr","r","sourced","result","i","id","get_channel_id","is_filted_channels","collectM3uSource","converter","iptv_org_sources","iptv_org_stream_sources","yang_m3u_sources","filter","yuechan_live_sources","filter","fanmingming_live_sources","filter","qwerttvv_bj_iptv_sources","filter","joevess_iptv_sources","filter","ss_sources","filter","adultiptv_sources","filter","cn_sources","filter","sources","adultiptv_sources","fanmingming_live_sources","yuechan_live_sources","yang_m3u_sources","joevess_iptv_sources","iptv_org_sources","iptv_org_stream_sources","epg_pw_sources","qwerttvv_bj_iptv_sources","ss_sources","cn_sources","hrtime","updateByRollback","sr","sr_filter","idx","rollback_urls","get_rollback_urls","now","hrtime","res","text","updateEPGByRollback","updateDATAByRollback","epgs_sources","ApiJson","fs","path","gen_tvbox_json","srcs","group","j","live","name","f_name","writeTvBoxJson","tvbox_p","fs","path","loadConfigCustom","fs","config_path","cfg","path","trimAny","getFilenames","dist_path","f","runCustomTask","write_custom_path","files","rules","r","ruled","ru","arr","res","rr","i","name","url","extinf","_name","m3u2txt","cleanFiles","copyFiles","sources","sr","ok","text","now","getContent","hrtime","sourcesCollector","Collector","v","m3u","count","writeM3u","writeM3uToTxt","writeSources","writeTvBoxJson","updateChannelList","res","updateByRollback","result","epgs","epgs_sources","epg_sr","writeEpgXML","updateEPGByRollback","sources_res","r","epgs_res","mergeTxts","mergeSources","updateChannelsJson","updateReadme","movie","ApiJson","data_sr","writeMovieJson","updateDATAByRollback","runCustomTask","err"]}