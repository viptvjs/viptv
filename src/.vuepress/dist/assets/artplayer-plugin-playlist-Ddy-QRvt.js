const c=l=>a=>{const n={"zh-cn":{playlist:"播放列表"},en:{playlist:"Playlist"}};a.i18n.update(n);const s=(t,e)=>{if(!l.playlist[e])return;const i=t.option;let r=t;l.rebuildPlayer?(t.destroy(),r=new Artplayer({...i,...l.playlist[e],autoplay:l.autoNext??i.autoplay,i18n:n,id:`${i.id}-${e===0?"":e}`})):(t.switchUrl(l.playlist[e].url,l.playlist[e].title),(l.autoNext??i.autoplay)&&t.play()),typeof l.onchanged=="function"&&l.onchanged(r)},y=l.playlist.findIndex(t=>t.url===a.option.url);l.autoNext&&y<l.playlist.length&&a.on("video:ended",()=>{s(a,y+1)});const p='<i class="art-icon"><svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="M810.666667 384H85.333333v85.333333h725.333334V384z m0-170.666667H85.333333v85.333334h725.333334v-85.333334zM85.333333 640h554.666667v-85.333333H85.333333v85.333333z m640-85.333333v256l213.333334-128-213.333334-128z" fill="#ffffff"></path></svg></i>';return a.controls.add({name:"playlist",position:"right",html:l.showText?a.i18n.get("playlist"):p,style:{padding:"0 10px"},selector:l.playlist.map((t,e)=>({html:`${e+1}. ${t.title||`Ep.${e+1}`}`,style:{textAlign:"left"},index:e,default:y===e})),onSelect(t){return s(a,t.index),l.showText?a.i18n.get("playlist"):p}}),{name:"artplayerPlaylist"}};typeof window<"u"&&(window.artplayerPlaylist=c);export{c as a};
